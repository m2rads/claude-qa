| Given | When | Then |
|-------|------|------|
| A valid store ID (123), existing itemID ("ITEM001"), and valid effectiveStoreTime | A POST request is made to /api/ESL/Refresh/{store}/{itemID} | - Response status code is 200<br>- Response body contains "true" indicating successful refresh<br>- The ESL for the given item in the store is refreshed at the specified time |
| A store ID of 0 (representing all stores), existing itemID ("ITEM001"), and valid effectiveStoreTime | A POST request is made to /api/ESL/Refresh/0/{itemID} | - Response status code is 200<br>- Response body contains "true"<br>- The ESL for the given item is refreshed in all stores at the specified time |
| A valid store ID (123), existing itemID ("ITEM001"), and no effectiveStoreTime provided | A POST request is made to /api/ESL/Refresh/{store}/{itemID} without effectiveStoreTime | - Response status code is 200<br>- Response body contains "true"<br>- The ESL is refreshed immediately |
| An invalid store ID (-1), existing itemID ("ITEM001"), and valid effectiveStoreTime | A POST request is made to /api/ESL/Refresh/-1/{itemID} | - Response status code is 400<br>- Response body contains an error message about invalid store ID |
| A valid store ID (123), non-existent itemID ("NONEXISTENT"), and valid effectiveStoreTime | A POST request is made to /api/ESL/Refresh/{store}/NONEXISTENT | - Response status code is 404<br>- Response body contains an error message about non-existent item |
| A valid store ID (123), existing itemID ("ITEM001"), and invalid effectiveStoreTime format | A POST request is made to /api/ESL/Refresh/{store}/{itemID} with invalid datetime | - Response status code is 400<br>- Response body contains an error message about invalid datetime format |
| A valid store ID (123), existing itemID ("ITEM001"), and effectiveStoreTime in the past | A POST request is made to /api/ESL/Refresh/{store}/{itemID} with past datetime | - Response status code is 400<br>- Response body contains an error message about invalid (past) datetime |
| A valid store ID (123), existing itemID ("ITEM001"), valid effectiveStoreTime, but no associated ESL | A POST request is made to /api/ESL/Refresh/{store}/{itemID} | - Response status code is 404<br>- Response body contains an error message about no associated ESL |
| A valid store ID (123), multiple existing itemIDs ("ITEM001,ITEM002"), and valid effectiveStoreTime | A POST request is made to /api/ESL/Refresh/{store}/{itemID} with comma-separated itemIDs | - Response status code is 200<br>- Response body contains "true"<br>- All specified ESLs for the given items in the store are refreshed |
